<div class="character-sheet p-6">
  <div class="mb-4">
    <div class="flex justify-between items-center mb-2">
      <h2 class="gothic-header text-xl">{{ 'character.sheet.personalDetails' | dynamicTranslate }}</h2>
      <button *ngIf="!isInEditMode()" (click)="toggleEditMode()" 
              class="text-sm text-blue-600 hover:text-blue-800">
        {{ 'ui.actions.edit' | dynamicTranslate }}
      </button>
    </div>
    <div *ngIf="isInEditMode()" class="flex flex-col sm:flex-row gap-2 justify-center">
      <button (click)="saveCharacterData()" class="flex-1 sm:flex-none px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 text-sm sm:w-1/2">
        {{ 'ui.actions.save' | dynamicTranslate }}
      </button>
      <button (click)="cancelEdit()" class="flex-1 sm:flex-none px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm sm:w-1/2">
        {{ 'ui.actions.cancel' | dynamicTranslate }}
      </button>
    </div>
  </div>
  
  <!-- View Mode -->
  <div class="space-y-3 text-sm" *ngIf="!isInEditMode()">
    <div><strong>{{ 'character.basicInfo.player' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong> {{ character.player }}</div>
    <div><strong>{{ 'character.basicInfo.age' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong> {{ character.age }}</div>
    <div><strong>{{ 'character.occupation' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong> {{ getOccupationName(character.occupation) }}</div>
    <div><strong>{{ 'character.basicInfo.sex' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong> {{ getSexTranslation(character.sex) }}</div>
    <div><strong>{{ 'character.basicInfo.residence' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong> {{ character.residence }}</div>
    <div><strong>{{ 'character.basicInfo.birthplace' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong> {{ character.birthplace }}</div>
  </div>

  <!-- Edit Mode -->
  <div class="space-y-3 text-sm" *ngIf="isInEditMode()">
    <div class="grid grid-cols-3 gap-2 items-center">
      <strong>{{ 'character.basicInfo.player' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong>
      <input [(ngModel)]="character.player" class="col-span-2 p-2 border rounded">
    </div>
    <div class="grid grid-cols-3 gap-2 items-center">
      <strong>{{ 'character.basicInfo.age' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong>
      <input [(ngModel)]="character.age" (ngModelChange)="onAgeChangeEvent()" type="number" min="15" max="90" class="col-span-2 p-2 border rounded">
    </div>
    <div class="grid grid-cols-3 gap-2 items-center">
      <strong>{{ 'character.occupation' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong>
      <select [(ngModel)]="character.occupation" class="col-span-2 p-2 border rounded">
        <option value="">{{ 'character.creation.occupation.select' | dynamicTranslate }}</option>
        <option *ngFor="let occ of occupations" [value]="occ.id">{{ getOccupationName(occ.id) }}</option>
      </select>
    </div>
    <div class="grid grid-cols-3 gap-2 items-center">
      <strong>{{ 'character.basicInfo.sex' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong>
      <select [(ngModel)]="character.sex" class="col-span-2 p-2 border rounded">
        <option [value]="sexValues.Male">{{ getSexTranslation(sexValues.Male) }}</option>
        <option [value]="sexValues.Female">{{ getSexTranslation(sexValues.Female) }}</option>
        <option [value]="sexValues.Other">{{ getSexTranslation(sexValues.Other) }}</option>
        <option [value]="sexValues.Undefined">{{ getSexTranslation(sexValues.Undefined) }}</option>
      </select>
    </div>
    <div class="grid grid-cols-3 gap-2 items-center">
      <strong>{{ 'character.basicInfo.residence' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong>
      <input [(ngModel)]="character.residence" class="col-span-2 p-2 border rounded">
    </div>
    <div class="grid grid-cols-3 gap-2 items-center">
      <strong>{{ 'character.basicInfo.birthplace' | dynamicTranslate }}{{ 'ponctuation.colon' | dynamicTranslate }}</strong>
      <input [(ngModel)]="character.birthplace" class="col-span-2 p-2 border rounded">
    </div>
  </div>
</div>