<app-modal
  [isOpen]="isOpen"
  [title]="(isCreating ? 'character.sheet.notes.create.title' : (isEditMode ? 'character.sheet.notes.edit.title' : 'character.sheet.notesTitle')) | dynamicTranslate"
  [type]="(isCreating || isEditMode) ? 'form' : 'dialog'"
  [maxWidth]="'max-w-4xl'"
  [disableConfirm]="!canSave()"
  (save)="onSave()"
  (close)="onClose()">
  
  <div class="space-y-4">
    <!-- Title field -->
    <div *ngIf="isEditMode || isCreating">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        {{ 'character.sheet.notes.title.label' | dynamicTranslate }} <span class="text-red-500">*</span>
      </label>
      <input
        type="text"
        [(ngModel)]="editedTitle"
        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        [placeholder]="'character.sheet.notes.title.placeholder' | dynamicTranslate"
        [disabled]="!isEditMode && !isCreating"
        maxlength="100">
      <div class="text-xs text-gray-500 mt-1">
        {{ editedTitle.length }}/100
      </div>
    </div>
    <div *ngIf="!isEditMode && !isCreating">
      <div class="text-lg text-gray-900 mb-2">
        {{ editedTitle }}
      </div>
    </div>

    <!-- Description field -->
    <div *ngIf="isEditMode || isCreating">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        {{ 'character.sheet.notes.description.label' | dynamicTranslate }} <span class="text-red-500">*</span>
      </label>
      <textarea
        [(ngModel)]="editedDescription"
        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        rows="8"
        [placeholder]="'character.sheet.notes.description.placeholder' | dynamicTranslate"
        [disabled]="!isEditMode && !isCreating">
      </textarea>
    </div>
    <div *ngIf="!isEditMode && !isCreating">
      <div class="whitespace-pre-wrap">{{ editedDescription }}</div>
    </div>

    <!-- Required fields notice -->
    <div *ngIf="isEditMode || isCreating" class="text-xs text-gray-500 italic">
      <span class="text-red-500">*</span> {{ 'character.sheet.notes.required' | dynamicTranslate }}
    </div>
  </div>
</app-modal>
