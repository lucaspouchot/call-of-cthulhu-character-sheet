<div class="yaml-editor">
  <!-- Editor Header -->
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold text-cthulhu-dark">
      {{ 'character.yaml.editor' | dynamicTranslate }}
    </h3>
    
    <div class="flex gap-2">
      <button 
        (click)="copyToClipboard()" 
        class="px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded transition-colors"
        [title]="'character.yaml.copy' | dynamicTranslate">
        ðŸ“‹ {{ 'ui.actions.copy' | dynamicTranslate }}
      </button>
      
      <button 
        *ngIf="character"
        (click)="downloadYaml()" 
        class="px-3 py-1 text-sm bg-cthulhu-red hover:bg-red-800 text-white rounded transition-colors"
        [title]="'character.yaml.download' | dynamicTranslate">
        â¬‡ {{ 'ui.actions.download' | dynamicTranslate }}
      </button>
    </div>
  </div>

  <!-- Validation Status -->
  <div *ngIf="!isValid && validationErrors.length > 0" 
       class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
    <strong class="font-bold">{{ 'character.yaml.validationErrors' | dynamicTranslate }}</strong>
    <ul class="mt-2 text-sm list-disc list-inside">
      <li *ngFor="let error of validationErrors">
        <strong>{{ error.path }}:</strong> {{ error.message }}
      </li>
    </ul>
  </div>

  <div *ngIf="isValid" 
       class="mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded text-sm">
    âœ“ {{ 'character.yaml.valid' | dynamicTranslate }}
  </div>

  <!-- YAML Editor -->
  <div class="yaml-editor-container">
    <textarea
      [(ngModel)]="yamlContent"
      (ngModelChange)="onContentChange()"
      [readonly]="readonly"
      class="yaml-textarea"
      [class.readonly]="readonly"
      [class.invalid]="!isValid"
      spellcheck="false"
      rows="25">
    </textarea>
  </div>

  <!-- Help Text -->
  <div class="mt-4 text-sm text-gray-600">
    <p>{{ 'character.yaml.help' | dynamicTranslate }}</p>
  </div>
</div>
